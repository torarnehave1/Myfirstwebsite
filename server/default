# HTTPS server configuration
server {
    listen 443 ssl http2;
    listen [::]:443 ssl http2;
    server_name slowyou.io www.slowyou.io;

    # SSL Certificate Configuration
    ssl_certificate /etc/letsencrypt/live/slowyou.io/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/slowyou.io/privkey.pem;
    include /etc/letsencrypt/options-ssl-nginx.conf;
    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem;

    # Define the root where static files are stored
    root /var/www/html/slowyouio/public;

    # Serve static files directly
    location ~* \.(css|js|jpg|jpeg|gif|png|svg|ico|mp4|ogg|webm)$ {
        expires 30d;  # Caching for 30 days
        access_log off;  # Turn off access logging for static files
        add_header Cache-Control "public";
    }

    # Proxy all other requests to the Express application
    location / {
        proxy_pass http://localhost:3001;
        include /etc/nginx/proxy_params;
    }
}
